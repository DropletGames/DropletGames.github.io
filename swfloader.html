<!DOCTYPE html>
<html>
  <head>
    <title>SWF Loader | Droplet Games</title>
  </head>
  <body>
    <h1>SWF Loader</h1>
    <h2>If you have a link to a working SWF file, you can load it</h2>
    <noscript><p><i>This requires JavaScript</i></p></noscript>
    <p>Available soon</p>
    <script>
    // @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat/MIT
    async function swfloader() {
      document.getElementById('swfDiv').innerHTML = `<object width="${document.getElementById('width').value}" height="${document.getElementById('height').value}">
            <param name="movie" value="${document.getElementById('url').value}" />
            <param name="wmode" value="direct" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="${document.getElementById('url').value}" width="${document.getElementById('width').value}" height="${document.getElementById('height').value}">
                <param name="wmode" value="direct" />
            <!--<![endif]-->
            <!-- This could all be much shorter (and probably more readable) with the help of some CSS. Will get around to doing this eventually -->
                <div id="flash-notice">
                  <noscript>
                    <p>Without a <a href="../../../runningflash.html">Flash-compatible plugin</a> installed on an older browser, <i>or</i> Ruffle enabled on a newer browser, Flash games will not work.</p>
                    <p>You may do one of the following:<p>
                    <ul>
                      <li>Enable JavaScript to enable and use Ruffle</li>
                      <li><a href="https://www.adobe.com/go/getflashplayer"><img src="https://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Load Adobe Flash player" /></a></li>
                    </ul></noscript>
                  </div>
                <script>
                  \/\/ @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat/MIT
                  if(localStorage.getItem('ruffleEnabled') == 'true') {
                    var script = document.createElement('script');
                    script.src = "../../../assets/js/ruffle/ruffle.js"
                    document.head.appendChild(script);
                  } else {
                    async function enableRuffle() {
                      localStorage.setItem('ruffleEnabled', 'true');
                      window.location.reload();
                    }
                    window.enableRuffle = enableRuffle;
                    var flashNotice = document.getElementById('flash-notice')
                    flashNotice.innerHTML = '<p>Without a <a href="../../../runningflash.html">Flash-compatible plugin</a> installed on an older browser, <i>or</i> Ruffle enabled on a newer browser, Flash games will not work.</p>\\n\\\
                    <p>You may do one of the following:<p>\\n\\\
                    <ul>\\n\\\
                      <li><button type="button" onclick="javascript:enableRuffle()">Enable Ruffle</button></li>\\n\\\
                      <li><a href="https://www.adobe.com/go/getflashplayer"><img src="https://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Load Adobe Flash player" /></a></li>\\n\\\
                    </ul>'
                  }
                  \/\/ @license-end
                </script>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>`
    }
    // @license-end
    </script>
    <form action="javascript:swfloader()">
      <label for="url">Enter SWF URL:</label>
      <input type="text" id="url" name="url"><br>
      <label>Width:</label>
      <input type="number" id="width" name="width"><br>
      <label>Height:</label>
      <input type="number" id="height" name="height"><br>
      <input type="submit" value="Submit">
    </form>
    <div id="swfDiv">

    </div>
  </body>
</html>
